
# Пошаговая инструкция по установке и настройке Telegram-бота с использованием Python

# Шаг 1: Установка Python и pip

1. Обновите пакеты системы:
    sudo apt update
    sudo apt upgrade -y

2. Установите Python 3 и pip3:
    sudo apt install python3 python3-pip

# Шаг 2: Установка зависимостей

1. Перейдите в каталог с вашим ботом:
    cd /путь/до/бота

    *(Замените `/путь/до/бота` на фактический путь к вашему проекту)*

2. Установите необходимые зависимости из файла `requirements.txt`:
    pip3 install -r requirements.txt
    Если что то не хватает то просто через pip установите

    *Примечание: В некоторых системах SQLite может быть установлен по умолчанию. Если команда не сработала, проверьте наличие в системе документации или используйте менеджер пакетов вашей ОС.*

# Шаг 3: Настройка конфигурации файла `.env`

Для работы бота требуется файл `.env`, который содержит важные параметры для его настройки. Вот описание каждого параметра:

# Токен для оплаты от BotFather
PAYMENTS_TOKEN=11111:TEST:11111  # Замените на реальный платежный токен от BotFather

# Токен вашего бота, полученный от BotFather
BOT_TOKEN=123456789  # Замените на токен вашего бота

# Данные для авторизации на сервере
LOGIN_URL=http://195.xxx.253.xxx:xxxx/login  # Замените на URL авторизации (адрес вашего сервера и порт)
LOGIN_USERNAME=admin  # Логин для авторизации
LOGIN_PASSWORD=admin  # Пароль для авторизации

# IP-адрес сервера (без порта)
SERVER_IP=195.xxx.253.xxx  # Замените на IP вашего сервера

# URL вашего сервера (включая порт)
SERVER_URL=http://195.xxx.253.xxx:xxxx  # Замените на ваш URL (с протоколом http или https, в зависимости от порта)

# Путь к базе данных (лучше не изменять)
DATABASE_PATH=/etc/x-ui/x-ui.db

# Локальная база данных пользователей (лучше не изменять)
USERSDATABASE=users.db

# URL для добавления клиента через API (замените IP и порт)
ADD_CLIENT_URL=http://195.xxx.253.xxx:xxxx/panel/api/inbounds/addClient

# Идентификаторы услуг в панели управления (создайте соответствующие подключения и замените ID)
ID_1=1  # ID для пробного периода
ID_2=2  # ID для платных услуг
ID_3=3  # ID для бонусных подключений

# Данные о канале и администраторе
CHANNEL_ID=@Yuki_VPN  # Ваш Telegram-канал
ADMIN_ID=913755740  # ID администратора
CHANNEL_LINK=https://t.me/Yuki_VPN  # Ссылка на ваш канал

# Цены и тарифы (в копейках)
PRICE_1_MONTH=10000  # Стоимость за 1 месяц
PRICE_2_MONTHS=19000  # Стоимость за 2 месяца
PRICE_6_MONTHS=55000  # Стоимость за 6 месяцев
PRICE_1_YEAR=100000  # Стоимость за 1 год

# Псевдоним администратора
NIK=@shizukes

# Лимиты трафика (в байтах)
TOTAL_GB_259200000=5368709120  # 5 ГБ на пробный период
TOTAL_GB_2592000000=unlimited  # Безлимит для 1 месяца
TOTAL_GB_5184000000=unlimited  # Безлимит для 2 месяцев
TOTAL_GB_15552000000=unlimited  # Безлимит для 6 месяцев
TOTAL_GB_31104000000=unlimited  # Безлимит для 1 года

# Цены в зависимости от объема трафика
PRICE_2592000000=200  # Цена для 1 месяца
PRICE_5184000000=350  # Цена для 2 месяцев
PRICE_15552000000=6500  # Цена для 6 месяцев
PRICE_31104000000=1200  # Цена для 1 года
```

Обязательно замените все переменные на актуальные значения для вашего проекта.

# Шаг 4: Запуск бота вручную

1. Для проверки работоспособности бота, запустите его вручную:
    python3 bot.py

2. Если бот запускается без ошибок, можете переходить к следующему шагу и настроить его запуск как системную службу.

# Шаг 5: Настройка бота как службы (systemd service)

1. Создайте файл службы для systemd:
    sudo nano /etc/systemd/system/bot.service

2. Вставьте в файл следующий код:

    ```
    [Unit]
    Description=My Bot Daemon
    After=network.target

    [Service]
    Type=simple
    User=root
    WorkingDirectory=/root/bot
    ExecStart=/usr/bin/python3 /root/bot/bot.py
    Restart=always

    [Install]
    WantedBy=multi-user.target
    ```

    - **WorkingDirectory** — путь к директории, где находится бот.
    - **ExecStart** — команда для запуска бота.
Пожалуйста без ``` вставьте

3. Сохраните файл и закройте редактор.

# Шаг 6: Активация и запуск службы

1. Перезагрузите systemd для применения изменений:
    sudo systemctl daemon-reload

2. Активируйте службу для автозапуска при старте системы:
    sudo systemctl enable bot.service

3. Запустите службу:
    sudo systemctl start bot.service

4. Проверьте статус службы, чтобы убедиться, что она работает корректно:
    sudo systemctl status bot.service

5. перезапустите службу:
    sudo systemctl restart bot.service
	НАДО ПОСЛЕ КАЖДОГО ИЗМЕНЕНИЯ

Если все шаги выполнены успешно, ваш бот будет автоматически запускаться при старте системы и будет работать в фоновом режиме.

# Примечания:
- Файл `.env` должен находиться в том же каталоге, что и бот, или путь к нему должен быть явно указан в коде.
- Если бот не запускается или возникают ошибки, проверьте логи службы с помощью команды:
    sudo journalctl -u bot.service -f

